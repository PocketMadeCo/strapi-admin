(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[8853],{15738:(e,t,r)=>{var n=r(4293);e.exports=function(e){var t=null==e?0:e.length;return t?n(e,1,t):[]}},88507:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){switch(e){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}};t.default=r},49491:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(43408)),u=n(r(32735)),o=n(r(19615)),i=r(90662),l=r(9808),s=r(95602),c=n(r(37213)),d=n(r(15738)),f=r(5636),p=n(r(60216)),g=n(r(88507)),v=(0,o.default)(l.Box).withConfig({displayName:"BoundRoute__MethodBox",componentId:"sc-vrpses-0"})(["margin:-1px;border-radius:"," 0 0 ",";"],(function(e){return e.theme.spaces[1]}),(function(e){return e.theme.spaces[1]}));function m(e){var t=e.route,r=(0,f.useIntl)().formatMessage,n=t.method,o=t.handler,p=t.path,m=p?(0,d.default)(p.split("/")):[],y=o?o.split("."):[],b=(0,a.default)(y,2),O=b[0],j=void 0===O?"":O,h=b[1],E=void 0===h?"":h,P=(0,g.default)(t.method);return u.default.createElement(i.Stack,{size:2},u.default.createElement(s.Typography,{variant:"delta",as:"h3"},r({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xa0",u.default.createElement("span",null,j),u.default.createElement(s.Typography,{variant:"delta",textColor:"primary600"},".",E)),u.default.createElement(i.Stack,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",size:0},u.default.createElement(v,{background:P.background,borderColor:P.border,padding:2},u.default.createElement(s.Typography,{fontWeight:"bold",textColor:P.text},n)),u.default.createElement(l.Box,{paddingLeft:2,paddingRight:2},(0,c.default)(m,(function(e){return u.default.createElement(s.Typography,{key:e,textColor:e.includes(":")?"neutral600":"neutral900"},"/",e)})))))}m.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},m.propTypes={route:p.default.shape({handler:p.default.string,method:p.default.string,path:p.default.string})};var y=m;t.default=y},1559:(e,t,r)=>{"use strict";var n=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(19615)),u=r(9808);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var i=(0,a.css)(["background:",";svg{opacity:1;}"],(function(e){return e.theme.colors.primary100})),l=(0,a.default)(u.Box).withConfig({displayName:"CheckboxWrapper",componentId:"sc-1ltdwf1-0"})(["display:flex;justify-content:space-between;align-items:center;svg{opacity:0;path{fill:",";}}"," &:hover{","}"],(function(e){return e.theme.colors.primary600}),(function(e){return e.isActive&&i}),i);t.default=l},70815:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(32735)),o=r(92891),i=n(r(19615)),l=n(r(60216)),s=r(9808),c=r(52111),d=r(19192),f=r(95602),p=r(78330),g=n(r(42258)),v=r(5636),m=n(r(1559)),y=r(3813);function b(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}var O=i.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-r9ycls-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],(function(e){return e.theme.colors.neutral150})),j=function(e){var t=e.subCategory,r=(0,v.useIntl)().formatMessage,n=(0,y.useUsersPermissions)(),a=n.onChange,i=n.onChangeSelectAll,l=n.onSelectedAction,b=n.selectedAction,j=n.modifiedData,h=(0,u.useMemo)((function(){return(0,o.get)(j,t.name,{})}),[j,t]),E=(0,u.useMemo)((function(){return Object.values(h).every((function(e){return!0===e.enabled}))}),[h]),P=(0,u.useMemo)((function(){return Object.values(h).some((function(e){return!0===e.enabled}))&&!E}),[h,E]),w=(0,u.useCallback)((function(e){var t=e.target.name;i({target:{name:t,value:!E}})}),[E,i]),_=(0,u.useCallback)((function(e){return b===e}),[b]);return u.default.createElement(s.Box,null,u.default.createElement(d.Flex,{justifyContent:"space-between",alignItems:"center"},u.default.createElement(s.Box,{paddingRight:4},u.default.createElement(f.Typography,{variant:"sigma",textColor:"neutral600"},t.label)),u.default.createElement(O,null),u.default.createElement(s.Box,{paddingLeft:4},u.default.createElement(c.Checkbox,{name:t.name,value:E,onValueChange:function(e){return w({target:{name:t.name,value:e}})},indeterminate:P},r({id:"app.utils.select-all",defaultMessage:"Select all"})))),u.default.createElement(d.Flex,{paddingTop:6,paddingBottom:6},u.default.createElement(p.Grid,{gap:2,style:{flex:1}},t.actions.map((function(e){var t="".concat(e.name,".enabled");return u.default.createElement(p.GridItem,{col:6,key:e.name},u.default.createElement(m.default,{isActive:_(e.name),padding:2,hasRadius:!0},u.default.createElement(c.Checkbox,{value:(0,o.get)(j,t,!1),name:t,onValueChange:function(e){return a({target:{name:t,value:e}})}},e.label),u.default.createElement("button",{type:"button","data-testid":"action-cog",onClick:function(){return l(e.name)},style:{display:"inline-flex",alignItems:"center"}},u.default.createElement(g.default,null))))})))))};j.propTypes={subCategory:l.default.object.isRequired};var h=j;t.default=h},67326:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(20566)),o=n(r(59571)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(32735)),l=n(r(60216)),s=n(r(98978)),c=r(9808),d=n(r(70815));function f(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){var t=e.name,r=e.permissions,n=(0,i.useMemo)((function(){return(0,s.default)(Object.values(r.controllers).reduce((function(e,n,a){var u="".concat(t,".controllers.").concat(Object.keys(r.controllers)[a]),i=(0,s.default)(Object.keys(n).reduce((function(e,t){return[].concat((0,o.default)(e),[g(g({},n[t]),{},{label:t,name:"".concat(u,".").concat(t)})])}),[]),"label");return[].concat((0,o.default)(e),[{actions:i,label:Object.keys(r.controllers)[a],name:u}])}),[]),"label")}),[t,r]);return i.default.createElement(c.Box,{padding:6},n.map((function(e){return i.default.createElement(d.default,{key:e.name,subCategory:e})})))};v.propTypes={name:l.default.string.isRequired,permissions:l.default.object.isRequired};var m=v;t.default=m},78735:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(43408)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(32735)),i=r(12001),l=r(5636),s=r(9808),c=r(90662),d=r(3813),f=n(r(98428)),p=n(r(67326)),g=n(r(58985)),v=r(506);function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var y=function(){var e=(0,d.useUsersPermissions)().modifiedData,t=(0,l.useIntl)().formatMessage,r=(0,o.useReducer)(v.reducer,v.initialState,(function(t){return(0,g.default)(t,e)})),n=(0,u.default)(r,2),a=n[0].collapses,m=n[1];return o.default.createElement(c.Stack,{size:1},a.map((function(r,n){return o.default.createElement(i.Accordion,{expanded:r.isOpen,toggle:function(){return function(e){return m({type:"TOGGLE_COLLAPSE",index:e})}(n)},key:r.name,variant:n%2===0?"secondary":void 0},o.default.createElement(i.AccordionToggle,{title:(0,f.default)(r.name),description:t({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:r.name}),variant:n%2?"primary":"secondary"}),o.default.createElement(i.AccordionContent,null,o.default.createElement(s.Box,null,o.default.createElement(p.default,{permissions:e[r.name],name:r.name}))))})))};t.default=y},58985:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(20566));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=function(e,t){var r=Object.keys(t).sort().map((function(e){return{name:e,isOpen:!1}}));return o(o({},e),{},{collapses:r})};t.default=i},506:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=void 0;var a=n(r(20566)),u=n(r(38317));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.initialState={collapses:[]};t.reducer=function(e,t){return(0,u.default)(e,(function(r){if("TOGGLE_COLLAPSE"!==t.type)return r;r.collapses=e.collapses.map((function(e,r){return r===t.index?i(i({},e),{},{isOpen:!e.isOpen}):i(i({},e),{},{isOpen:!1})}))}))}},29536:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(32735)),u=r(5636),o=r(95602),i=r(90662),l=r(78330),s=r(92891),c=r(3813),d=n(r(49491)),f=function(){var e=(0,u.useIntl)().formatMessage,t=(0,c.useUsersPermissions)(),r=t.selectedAction,n=t.routes,f=(0,s.without)(r.split("."),"controllers"),p=(0,s.get)(n,f[0]),g=f.slice(1).join("."),v=(0,s.isEmpty)(p)?[]:p.filter((function(e){return e.handler.endsWith(g)}));return a.default.createElement(l.GridItem,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},r?a.default.createElement(i.Stack,{size:2},v.map((function(e,t){return a.default.createElement(d.default,{key:t,route:e})}))):a.default.createElement(i.Stack,{size:2},a.default.createElement(o.Typography,{variant:"delta",as:"h3"},e({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),a.default.createElement(o.Typography,{as:"p",textColor:"neutral600"},e({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};t.default=f},61905:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(20566)),o=n(r(43408)),i=j(r(32735)),l=n(r(60216)),s=r(95602),c=r(90662),d=r(78330),f=r(5636),p=n(r(63080)),g=n(r(29536)),v=n(r(78735)),m=j(r(82886)),y=r(3813),b=n(r(15407));function O(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=(0,i.forwardRef)((function(e,t){var r=e.permissions,n=e.routes,a=(0,f.useIntl)().formatMessage,u=(0,i.useReducer)(m.default,m.initialState,(function(e){return(0,b.default)(e,r,n)})),l=(0,o.default)(u,2),O=l[0],j=l[1];(0,i.useImperativeHandle)(t,(function(){return{getPermissions:function(){return{permissions:O.modifiedData}},resetForm:function(){j({type:"ON_RESET"})},setFormAfterSubmit:function(){j({type:"ON_SUBMIT_SUCCEEDED"})}}}));var h=E(E({},O),{},{onChange:function(e){var t=e.target,r=t.name,n=t.value;return j({type:"ON_CHANGE",keys:r.split("."),value:"empty__string_value"===n?"":n})},onChangeSelectAll:function(e){var t=e.target,r=t.name,n=t.value;return j({type:"ON_CHANGE_SELECT_ALL",keys:r.split("."),value:n})},onSelectedAction:function(e){return j({type:"SELECT_ACTION",actionToSelect:e})}});return i.default.createElement(y.UsersPermissionsProvider,{value:h},i.default.createElement(d.Grid,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},i.default.createElement(d.GridItem,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},i.default.createElement(c.Stack,{size:6},i.default.createElement(c.Stack,{size:2},i.default.createElement(s.Typography,{variant:"delta",as:"h2"},a({id:(0,p.default)("Plugins.header.title"),defaultMessage:"Permissions"})),i.default.createElement(s.Typography,{as:"p",textColor:"neutral600"},a({id:(0,p.default)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),i.default.createElement(v.default,null))),i.default.createElement(g.default,null)))}));P.propTypes={permissions:l.default.object.isRequired,routes:l.default.object.isRequired};var w=(0,i.memo)(P);t.default=w},15407:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(20566));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=function(e,t,r){return o(o({},e),{},{initialData:t,modifiedData:t,routes:r})};t.default=i},82886:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var a=n(r(20566)),u=n(r(59571)),o=n(r(38317)),i=r(92891);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.initialState={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]};var c=function(e,t){return(0,o.default)(e,(function(r){switch(t.type){case"ON_CHANGE":var n=t.keys.length,a="enabled"===t.keys[n-1];if(t.value&&a){var o=(0,i.take)(t.keys,n-1).join(".");r.selectedAction=o}(0,i.set)(r,["modifiedData"].concat((0,u.default)(t.keys)),t.value);break;case"ON_CHANGE_SELECT_ALL":var l=["modifiedData"].concat((0,u.default)(t.keys)),c=(0,i.get)(e,l,{}),d=Object.keys(c).reduce((function(e,r){return e[r]=s(s({},c[r]),{},{enabled:t.value}),e}),{});(0,i.set)(r,l,d);break;case"ON_RESET":r.modifiedData=e.initialData;break;case"ON_SUBMIT_SUCCEEDED":r.initialData=e.modifiedData;break;case"SELECT_ACTION":var f=t.actionToSelect;r.selectedAction=f===e.selectedAction?"":f;break;default:return r}}))};t.default=c},3813:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.useUsersPermissions=t.UsersPermissionsProvider=t.UsersPermissions=void 0;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=u?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(n,o,l):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(32735)),o=n(r(60216));function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}var l=(0,u.createContext)({});t.UsersPermissions=l;var s=function(e){var t=e.children,r=e.value;return u.default.createElement(l.Provider,{value:r},t)};t.UsersPermissionsProvider=s;t.useUsersPermissions=function(){return(0,u.useContext)(l)},s.propTypes={children:o.default.node.isRequired,value:o.default.object.isRequired}},80887:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useFetchRole",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"useForm",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"usePlugins",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"useRolesList",{enumerable:!0,get:function(){return u.default}});var a=n(r(91229)),u=n(r(81752)),o=n(r(38904)),i=n(r(72274))},72274:(e,t,r)=>{"use strict";var n=r(98399),a=r(34398),u=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(67945)),i=a(r(20566)),l=a(r(85374)),s=a(r(43408)),c=r(32735),d=r(10938),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!==typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(12771)),p=a(r(26958)),g=a(r(92569));function v(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e){var t=(0,c.useReducer)(f.default,f.initialState),r=(0,s.default)(t,2),a=r[0],u=r[1],i=(0,d.useNotification)(),v=(0,c.useRef)(null);(0,c.useEffect)((function(){return v.current=!0,e?m(e):u({type:"GET_DATA_SUCCEEDED",role:{}}),function(){return v.current=!1}}),[e]);var m=function(){var e=(0,l.default)(o.default.mark((function e(t){var r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.default.get("/".concat(g.default,"/roles/").concat(t));case 3:r=e.sent,a=r.data.role,v.current&&u({type:"GET_DATA_SUCCEEDED",role:a}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),n.error(e.t0),u({type:"GET_DATA_ERROR"}),i({type:"warning",message:{id:"notification.error"}});case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),b=(0,c.useCallback)((function(e){u(y({type:"ON_SUBMIT_SUCCEEDED"},e))}),[]);return y(y({},a),{},{onSubmitSucceeded:b})};t.default=b},12771:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var a=n(r(38317));t.initialState={role:{},isLoading:!0};var u=function(e,t){return(0,a.default)(e,(function(e){switch(t.type){case"GET_DATA_SUCCEEDED":e.role=t.role,e.isLoading=!1;break;case"GET_DATA_ERROR":e.isLoading=!1;break;case"ON_SUBMIT_SUCCEEDED":e.role.name=t.name,e.role.description=t.description;break;default:return e}}))};t.default=u},91229:(e,t,r)=>{"use strict";var n=r(98399),a=r(34398),u=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(67945)),i=a(r(85374)),l=a(r(43408)),s=r(32735),c=r(10938),d=r(86286),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!==typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(97383));function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var g=function(e,t){var r=(0,c.useRBAC)(t),a=r.isLoading,u=r.allowedActions,p=(0,s.useReducer)(f.default,f.initialState),g=(0,l.default)(p,2),v=g[0],m=v.isLoading,y=v.modifiedData,b=g[1],O=(0,c.useNotification)(),j=(0,s.useRef)(!0),h=new AbortController,E=h.signal;return(0,s.useEffect)((function(){var t=function(){var t=(0,i.default)(o.default.mark((function t(){var r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,b({type:"GET_DATA"}),t.next=4,(0,c.request)((0,d.getRequestURL)(e),{method:"GET",signal:E});case 4:r=t.sent,b({type:"GET_DATA_SUCCEEDED",data:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),j.current&&(b({type:"GET_DATA_ERROR"}),n.error(t.t0),O({type:"warning",message:{id:"notification.error"}}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return a||t(),function(){h.abort(),j.current=!1}}),[a,e]),{allowedActions:u,dispatchSubmitSucceeded:(0,s.useCallback)((function(e){b({type:"ON_SUBMIT_SUCCEEDED",data:e})}),[]),isLoading:m,isLoadingForPermissions:a,modifiedData:y}};t.default=g},97383:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var a=n(r(38317));t.initialState={isLoading:!0,modifiedData:{}};var u=function(e,t){return(0,a.default)(e,(function(e){switch(t.type){case"GET_DATA":e.isLoading=!0,e.modifiedData={};break;case"GET_DATA_SUCCEEDED":e.isLoading=!1,e.modifiedData=t.data;break;case"GET_DATA_ERROR":e.isLoading=!0;break;case"ON_SUBMIT_SUCCEEDED":e.modifiedData=t.data;break;default:return e}}))};t.default=u},38904:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(67945)),o=n(r(85374)),i=n(r(43408)),l=r(32735),s=r(10938),c=r(92891),d=n(r(44850)),f=n(r(92569)),p=r(86286),g=n(r(26958)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(54409));function m(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}var y=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,s.useNotification)(),r=(0,l.useReducer)(v.default,v.initialState,(function(){return(0,d.default)(v.initialState,e)})),n=(0,i.default)(r,2),a=n[0],m=a.permissions,y=a.routes,b=a.isLoading,O=n[1],j=(0,l.useCallback)((0,o.default)(u.default.mark((function e(){var r,n,a,l,s;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O({type:"GET_DATA"}),e.next=4,Promise.all(["/".concat(f.default,"/permissions"),"/".concat(f.default,"/routes")].map(function(){var e=(0,o.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.default.get(t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:r=e.sent,n=(0,i.default)(r,2),a=n[0].permissions,l=n[1].routes,O({type:"GET_DATA_SUCCEEDED",permissions:(0,p.cleanPermissions)(a),routes:l}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),s=(0,c.get)(e.t0,["response","payload","message"],"An error occured"),O({type:"GET_DATA_ERROR"}),"Forbidden"!==s&&t({type:"warning",message:s});case 16:case"end":return e.stop()}}),e,null,[[0,11]])}))),[t]);return(0,l.useEffect)((function(){e&&j()}),[j,e]),{permissions:m,routes:y,getData:j,isLoading:b}};t.default=y},44850:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(20566));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=function(e,t){return o(o({},e),{},{isLoading:t})};t.default=i},54409:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var a=n(r(38317));t.initialState={permissions:{},routes:{},isLoading:!0};var u=function(e,t){return(0,a.default)(e,(function(e){switch(t.type){case"GET_DATA":e.isLoading=!0,e.permissions={},e.routes={};break;case"GET_DATA_SUCCEEDED":e.permissions=t.permissions,e.routes=t.routes,e.isLoading=!1;break;case"GET_DATA_ERROR":e.isLoading=!1;break;default:return e}}))};t.default=u},81752:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(67945)),o=n(r(85374)),i=n(r(43408)),l=r(32735),s=r(10938),c=r(92891),d=n(r(42137)),f=n(r(92569)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(46449));function g(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}var v=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,l.useReducer)(p.default,p.initialState,(function(){return(0,d.default)(p.initialState,e)})),r=(0,i.default)(t,2),n=r[0],a=n.roles,g=n.isLoading,v=r[1],m=(0,s.useNotification)(),y=(0,l.useRef)(!0),b=new AbortController,O=b.signal;(0,l.useEffect)((function(){return e&&j(),function(){b.abort(),y.current=!1}}),[e]);var j=function(){var e=(0,o.default)(u.default.mark((function e(){var t,r,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v({type:"GET_DATA"}),e.next=4,(0,s.request)("/".concat(f.default,"/roles"),{method:"GET",signal:O});case 4:t=e.sent,r=t.roles,v({type:"GET_DATA_SUCCEEDED",data:r}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),n=(0,c.get)(e.t0,["response","payload","message"],"An error occured"),y.current&&(v({type:"GET_DATA_ERROR"}),"Forbidden"!==n&&m({type:"warning",message:n}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return{roles:a,isLoading:g,getData:j}};t.default=v},42137:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(20566));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=function(e,t){return o(o({},e),{},{isLoading:t})};t.default=i},46449:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=t.default=void 0;var a=n(r(38317));t.initialState={roles:[],isLoading:!0};var u=function(e,t){return(0,a.default)(e,(function(e){switch(t.type){case"GET_DATA":e.isLoading=!0,e.roles=[];break;case"GET_DATA_SUCCEEDED":e.roles=t.data,e.isLoading=!1;break;case"GET_DATA_ERROR":e.isLoading=!1;break;default:return e}}))};t.default=u},1231:(e,t,r)=>{"use strict";var n=r(98399),a=r(34398),u=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(67945)),i=a(r(20566)),l=a(r(85374)),s=a(r(43408)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!==typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(32735)),d=r(60530),f=r(11856),p=r(16540),g=r(44526),v=r(90662),m=r(9808),y=r(37178),b=r(90353),O=r(95602),j=a(r(88677)),h=r(78330),E=r(83281),P=r(5636),w=r(10938),_=a(r(61905)),k=a(r(63080)),D=a(r(92569)),M=r(80887),T=a(r(31837)),S=a(r(26958));function C(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(){var e=(0,P.useIntl)().formatMessage,t=(0,c.useState)(!1),r=(0,s.default)(t,2),a=r[0],u=r[1],i=(0,w.useNotification)(),C=(0,d.useHistory)().goBack,R=(0,w.useOverlayBlocker)(),x=R.lockApp,L=R.unlockApp,W=(0,M.usePlugins)(),I=W.isLoading,G=W.permissions,B=W.routes,U=(0,w.useTracking)().trackUsage,N=(0,c.useRef)(),q=function(){var e=(0,l.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(),u(!0),e.prev=2,r=N.current.getPermissions(),e.next=6,S.default.post("/".concat(D.default,"/roles"),A(A(A({},t),r),{},{users:[]}));case 6:U("didCreateRole"),i({type:"success",message:{id:(0,k.default)("Settings.roles.created"),defaultMessage:"Role created"}}),C(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),n.error(e.t0),i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}});case 15:u(!1),L();case 17:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return c.default.createElement(p.Main,null,c.default.createElement(w.SettingsPageTitle,{name:"Roles"}),c.default.createElement(E.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:q,validationSchema:T.default},(function(t){var r=t.handleSubmit,n=t.values,u=t.handleChange,o=t.errors;return c.default.createElement(w.Form,{noValidate:!0,onSubmit:r},c.default.createElement(f.HeaderLayout,{primaryAction:!I&&c.default.createElement(g.Button,{type:"submit",loading:a,startIcon:c.default.createElement(j.default,null)},e({id:"app.components.Button.save",defaultMessage:"Save"})),title:e({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:e({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),c.default.createElement(f.ContentLayout,null,c.default.createElement(v.Stack,{size:7},c.default.createElement(m.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},c.default.createElement(v.Stack,{size:4},c.default.createElement(O.Typography,{variant:"delta",as:"h2"},e({id:(0,k.default)("EditPage.form.roles"),defaultMessage:"Role details"})),c.default.createElement(h.Grid,{gap:4},c.default.createElement(h.GridItem,{col:6},c.default.createElement(y.TextInput,{name:"name",value:n.name||"",onChange:u,label:e({id:"Settings.roles.form.input.name",defaultMessage:"Name"}),error:o.name?e({id:o.name,defaultMessage:"Invalid value"}):null})),c.default.createElement(h.GridItem,{col:6},c.default.createElement(b.Textarea,{name:"description",value:n.description||"",onChange:u,label:e({id:"Settings.roles.form.input.description",defaultMessage:"Description"}),error:o.description?e({id:o.description,defaultMessage:"Invalid value"}):null}))))),!I&&c.default.createElement(_.default,{ref:N,permissions:G,routes:B}))))})))};t.default=x},31837:(e,t,r)=>{"use strict";var n=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(5173)),u=r(10938);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var i=a.object().shape({name:a.string().required(u.translatedErrors.required),description:a.string().required(u.translatedErrors.required)});t.default=i},79235:(e,t,r)=>{"use strict";var n=r(98399),a=r(34398),u=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(r(67945)),i=a(r(20566)),l=a(r(85374)),s=a(r(43408)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!==typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(32735)),d=r(11856),f=r(16540),p=r(44526),g=r(90662),v=r(9808),m=r(37178),y=r(90353),b=r(95602),O=a(r(98599)),j=a(r(88677)),h=r(58434),E=r(78330),P=r(83281),w=r(5636),_=r(60530),k=r(10938),D=a(r(61905)),M=a(r(63080)),T=a(r(92569)),S=r(80887),C=a(r(49620)),R=a(r(26958));function A(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var W=function(){var e=(0,w.useIntl)().formatMessage,t=(0,c.useState)(!1),r=(0,s.default)(t,2),a=r[0],u=r[1],i=(0,k.useNotification)(),A=(0,k.useOverlayBlocker)(),x=A.lockApp,W=A.unlockApp,I=(0,_.useRouteMatch)("/settings/".concat(T.default,"/roles/:id")).params.id,G=(0,S.usePlugins)(),B=G.isLoading,U=G.routes,N=(0,S.useFetchRole)(I),q=N.role,F=N.onSubmitSucceeded,z=N.isLoading,H=(0,c.useRef)(),V=function(){var e=(0,l.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(),u(!0),e.prev=2,r=H.current.getPermissions(),e.next=6,R.default.put("/".concat(T.default,"/roles/").concat(I),L(L(L({},t),r),{},{users:[]}));case 6:F({name:t.name,description:t.description}),i({type:"success",message:{id:(0,M.default)("Settings.roles.edited"),defaultMessage:"Role edited"}}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),n.error(e.t0),i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}});case 14:u(!1),W();case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return z?c.default.createElement(k.LoadingIndicatorPage,null):c.default.createElement(f.Main,null,c.default.createElement(k.SettingsPageTitle,{name:"Roles"}),c.default.createElement(P.Formik,{enableReinitialize:!0,initialValues:{name:q.name,description:q.description},onSubmit:V,validationSchema:C.default},(function(t){var r=t.handleSubmit,n=t.values,u=t.handleChange,o=t.errors;return c.default.createElement(k.Form,{noValidate:!0,onSubmit:r},c.default.createElement(d.HeaderLayout,{primaryAction:!B&&c.default.createElement(p.Button,{disabled:"strapi-super-admin"===q.code,type:"submit",loading:a,startIcon:c.default.createElement(j.default,null)},e({id:"app.components.Button.save",defaultMessage:"Save"})),title:q.name,subtitle:q.description,navigationAction:c.default.createElement(h.Link,{startIcon:c.default.createElement(O.default,null),to:"/settings/users-permissions/roles"},e({id:"app.components.go-back",defaultMessage:"Back"}))}),c.default.createElement(d.ContentLayout,null,c.default.createElement(g.Stack,{size:7},c.default.createElement(v.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},c.default.createElement(g.Stack,{size:4},c.default.createElement(b.Typography,{variant:"delta",as:"h2"},e({id:(0,M.default)("EditPage.form.roles"),defaultMessage:"Role details"})),c.default.createElement(E.Grid,{gap:4},c.default.createElement(E.GridItem,{col:6},c.default.createElement(m.TextInput,{name:"name",value:n.name||"",onChange:u,label:e({id:"Settings.roles.form.input.name",defaultMessage:"Name"}),error:o.name?e({id:o.name,defaultMessage:"Invalid value"}):null})),c.default.createElement(E.GridItem,{col:6},c.default.createElement(y.Textarea,{name:"description",value:n.description||"",onChange:u,label:e({id:"Settings.roles.form.input.description",defaultMessage:"Description"}),error:o.description?e({id:o.description,defaultMessage:"Invalid value"}):null}))))),!B&&c.default.createElement(D.default,{ref:H,permissions:q.permissions,routes:U}))))})))};t.default=W},49620:(e,t,r)=>{"use strict";var n=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!==typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(5173)),u=r(10938);function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}var i=a.object().shape({name:a.string().required(u.translatedErrors.required),description:a.string().required(u.translatedErrors.required)});t.default=i},29150:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(16950)),u=n(r(43408)),o=n(r(32735)),i=n(r(60216)),l=r(20763),s=r(95602),c=r(19192),d=r(53214),f=n(r(95717)),p=n(r(76470)),g=r(10938),v=r(5636),m=r(60530),y=r(86286),b=n(r(92569)),O=function(e){var t=e.sortedRoles,r=e.canDelete,n=e.permissions,i=e.setRoleToDelete,O=e.onDelete,j=(0,v.useIntl)().formatMessage,h=(0,m.useHistory)().push,E=(0,u.default)(O,2),P=E[0],w=E[1],_=function(e){h("/settings/".concat(b.default,"/roles/").concat(e))};return o.default.createElement(d.Tbody,null,null===t||void 0===t?void 0:t.map((function(e){return o.default.createElement(d.Tr,(0,a.default)({key:e.name},(0,g.onRowClick)({fn:function(){return _(e.id)}})),o.default.createElement(d.Td,{width:"20%"},o.default.createElement(s.Typography,null,e.name)),o.default.createElement(d.Td,{width:"50%"},o.default.createElement(s.Typography,null,e.description)),o.default.createElement(d.Td,{width:"30%"},o.default.createElement(s.Typography,null,"".concat(e.nb_users," ").concat(j({id:(0,y.getTrad)("Roles.users"),defaultMessage:"users"}).toLowerCase()))),o.default.createElement(d.Td,null,o.default.createElement(c.Flex,(0,a.default)({justifyContent:"end"},g.stopPropagation),o.default.createElement(g.CheckPermissions,{permissions:n.updateRole},o.default.createElement(l.IconButton,{onClick:function(){return _(e.id)},noBorder:!0,icon:o.default.createElement(f.default,null),label:j({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:"".concat(e.name)})})),function(e){return r&&!["public","authenticated"].includes(e.type)}(e)&&o.default.createElement(g.CheckPermissions,{permissions:n.deleteRole},o.default.createElement(l.IconButton,{onClick:function(){return t=e.id,i(t),void w(!P);var t},noBorder:!0,icon:o.default.createElement(p.default,null),label:j({id:"app.component.table.delete",defaultMessage:"Delete {target}"},{target:"".concat(e.name)})})))))})))},j=O;t.default=j,O.defaultProps={canDelete:!1},O.propTypes={onDelete:i.default.array.isRequired,permissions:i.default.object.isRequired,setRoleToDelete:i.default.func.isRequired,sortedRoles:i.default.array.isRequired,canDelete:i.default.bool}},18547:(e,t,r)=>{"use strict";var n=r(34398),a=r(87002);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(67945)),o=n(r(85374)),i=n(r(43408)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var r=D(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var i=u?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=e[o]}n.default=e,r&&r.set(e,n);return n}(r(32735)),s=r(44526),c=r(11856),d=r(16540),f=r(53214),p=r(28004),g=r(95602),v=r(29270),m=n(r(59290)),y=r(10938),b=r(5636),O=r(60530),j=r(84968),h=n(r(58469)),E=r(30215),P=r(86286),w=n(r(92569)),_=n(r(74472)),k=n(r(29150));function D(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(D=function(e){return e?r:t})(e)}var M=function(){var e=(0,y.useTracking)().trackUsage,t=(0,b.useIntl)().formatMessage,r=(0,O.useHistory)().push,n=(0,y.useNotification)(),a=(0,v.useNotifyAT)().notifyStatus,D=(0,y.useQueryParams)(),M=(0,i.default)(D,1)[0].query,T=(null===M||void 0===M?void 0:M._q)||"",S=(0,l.useState)(!1),C=(0,i.default)(S,2),R=C[0],A=C[1],x=(0,l.useState)(!1),L=(0,i.default)(x,2),W=L[0],I=L[1],G=(0,l.useState)(),B=(0,i.default)(G,2),U=B[0],N=B[1];(0,y.useFocusWhenNavigate)();var q=(0,j.useQueryClient)(),F=(0,l.useMemo)((function(){return{create:_.default.createRole,read:_.default.readRoles,update:_.default.updateRole,delete:_.default.deleteRole}}),[]),z=(0,y.useRBAC)(F),H=z.isLoading,V=z.allowedActions,Q=V.canRead,Y=V.canDelete,J=(0,j.useQuery)("get-roles",(function(){return(0,E.fetchData)(n,a)}),{initialData:{},enabled:Q}),K=J.isLoading,X=J.data.roles,Z=J.isFetching,$=K||Z,ee={roles:{id:(0,P.getTrad)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,P.getTrad)("Roles.empty.search"),defaultMessage:"No roles match the search."}},te=t({id:(0,P.getTrad)("HeaderNav.link.roles"),defaultMessage:"Roles"}),re=(0,j.useMutation)((function(e){return(0,E.deleteData)(e,n)}),{onSuccess:function(){var e=(0,o.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.invalidateQueries("get-roles");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),ne=function(){var e=(0,o.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),e.next=3,re.mutateAsync(U);case 3:A(!R),I(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=(0,h.default)(X||[],T,{keys:["name","description"]}),ue=T&&!ae.length?"search":"roles",oe=((null===X||void 0===X?void 0:X.length)||0)+1;return l.default.createElement(c.Layout,null,l.default.createElement(y.SettingsPageTitle,{name:te}),l.default.createElement(d.Main,{"aria-busy":$},l.default.createElement(c.HeaderLayout,{title:t({id:"Settings.roles.title",defaultMessage:"Roles"}),subtitle:t({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:l.default.createElement(y.CheckPermissions,{permissions:_.default.createRole},l.default.createElement(s.Button,{onClick:function(){e("willCreateRole"),r("/settings/".concat(w.default,"/roles/new"))},startIcon:l.default.createElement(m.default,null),size:"L"},t({id:(0,P.getTrad)("List.button.roles"),defaultMessage:"Add new role"})))}),l.default.createElement(c.ActionLayout,{startActions:l.default.createElement(y.SearchURLQuery,{label:t({id:"app.component.search.label",defaultMessage:"Search"})})}),l.default.createElement(c.ContentLayout,null,!Q&&l.default.createElement(y.NoPermissions,null),($||H)&&l.default.createElement(y.LoadingIndicatorPage,null),Q&&ae&&null!==ae&&void 0!==ae&&ae.length?l.default.createElement(f.Table,{colCount:4,rowCount:oe},l.default.createElement(f.Thead,null,l.default.createElement(f.Tr,null,l.default.createElement(f.Th,null,l.default.createElement(g.Typography,{variant:"sigma",textColor:"neutral600"},t({id:(0,P.getTrad)("Roles.name"),defaultMessage:"Name"}))),l.default.createElement(f.Th,null,l.default.createElement(g.Typography,{variant:"sigma",textColor:"neutral600"},t({id:(0,P.getTrad)("Roles.description"),defaultMessage:"Description"}))),l.default.createElement(f.Th,null,l.default.createElement(g.Typography,{variant:"sigma",textColor:"neutral600"},t({id:(0,P.getTrad)("Roles.users"),defaultMessage:"Users"}))),l.default.createElement(f.Th,null,l.default.createElement(p.VisuallyHidden,null,t({id:"components.TableHeader.actions-label",defaultMessage:"Actions"}))))),l.default.createElement(k.default,{sortedRoles:ae,canDelete:Y,permissions:_.default,setRoleToDelete:N,onDelete:[R,A]})):l.default.createElement(y.EmptyStateLayout,{content:ee[ue]})),l.default.createElement(y.ConfirmDialog,{isConfirmButtonLoading:W,onConfirm:ne,onToggleDialog:function(){A(!R)},isOpen:R})))};t.default=M},30215:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchData=t.deleteData=void 0;var a=n(r(67945)),u=n(r(85374)),o=r(86286),i=function(){var e=(0,u.default)(a.default.mark((function e(t,r){var n,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.axiosInstance.get((0,o.getRequestURL)("roles"));case 3:return n=e.sent,u=n.data,r("The roles have loaded successfully"),e.abrupt("return",u);case 9:throw e.prev=9,e.t0=e.catch(0),t({type:"warning",message:{id:"notification.error"}}),new Error("error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,r){return e.apply(this,arguments)}}();t.fetchData=i;var l=function(){var e=(0,u.default)(a.default.mark((function e(t,r){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.axiosInstance.delete("".concat((0,o.getRequestURL)("roles"),"/").concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),r({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,r){return e.apply(this,arguments)}}();t.deleteData=l},72088:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(32735)),u=r(10938),o=n(r(74472)),i=n(r(1231)),l=function(){return a.default.createElement(u.CheckPagePermissions,{permissions:o.default.createRole},a.default.createElement(i.default,null))};t.default=l},41744:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(32735)),u=r(10938),o=n(r(74472)),i=n(r(79235)),l=function(){return a.default.createElement(u.CheckPagePermissions,{permissions:o.default.updateRole},a.default.createElement(i.default,null))};t.default=l},6168:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(32735)),u=r(10938),o=n(r(74472)),i=n(r(18547)),l=function(){return a.default.createElement(u.CheckPagePermissions,{permissions:o.default.accessRoles},a.default.createElement(i.default,null))};t.default=l},35361:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(32735)),u=r(60530),o=r(10938),i=n(r(92569)),l=n(r(74472)),s=n(r(6168)),c=n(r(41744)),d=n(r(72088)),f=function(){return a.default.createElement(o.CheckPagePermissions,{permissions:l.default.accessRoles},a.default.createElement(u.Switch,null,a.default.createElement(u.Route,{path:"/settings/".concat(i.default,"/roles/new"),component:d.default,exact:!0}),a.default.createElement(u.Route,{path:"/settings/".concat(i.default,"/roles/:id"),component:c.default,exact:!0}),a.default.createElement(u.Route,{path:"/settings/".concat(i.default,"/roles"),component:s.default,exact:!0}),a.default.createElement(u.Route,{path:"",component:o.NotFound})))};t.default=f},26958:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(67945)),u=n(r(85374)),o=n(r(43653)),i=r(10938),l=o.default.create({baseURL:"http://localhost:1337"});l.interceptors.request.use(function(){var e=(0,u.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.headers={Authorization:"Bearer ".concat(i.auth.getToken()),Accept:"application/json","Content-Type":"application/json"},e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){Promise.reject(e)})),l.interceptors.response.use((function(e){return e}),(function(e){var t;throw 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(i.auth.clearAppStorage(),window.location.reload()),e}));var s=l;t.default=s},8005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(92891),a=function(e){return Object.keys(e).reduce((function(t,r){var a=e[r].controllers,u=Object.keys(a).reduce((function(e,t){return(0,n.isEmpty)(a[t])||(e[t]=a[t]),e}),{});return(0,n.isEmpty)(u)||(t[r]={controllers:u}),t}),{})};t.default=a},98428:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(23940));var u=function(e){switch(e){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return(0,a.default)(e.replace("api::","").replace("plugin::",""))}};t.default=u},85084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e.reduce((function(e,t){return e.push({label:t,value:t}),e}),[])};t.default=r},96758:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(92569)),u=function(e){return"/".concat(a.default,"/").concat(e)};t.default=u},86286:(e,t,r)=>{"use strict";var n=r(34398);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"axiosInstance",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"cleanPermissions",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"formatPolicies",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getRequestURL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getTrad",{enumerable:!0,get:function(){return i.default}});var a=n(r(26958)),u=n(r(8005)),o=n(r(96758)),i=n(r(63080)),l=n(r(85084))}}]);